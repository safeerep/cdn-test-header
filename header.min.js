(function() {

    // hide existing header on the page
    (function hideExistingHeader() {
        const style = document.createElement("style");
        style.innerHTML = `
            #header {
                display: none !important;
            }
        `;
        document.head.appendChild(style);
    })();

    // inject new shadow-DOM header
    function init() {
        const container = document.getElementById("ep-header");
        if (!container) return;

        const root = container.attachShadow({ mode: "open" });

        root.innerHTML = `
        <style>
            .ep-nav {
                width: 100%;
                padding: 14px 20px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                background: #ffffff;
                box-shadow: 0 2px 6px rgba(0,0,0,0.1);
                font-family: sans-serif;
            }
            .ep-logo {
                font-size: 18px;
                font-weight: bold;
                color: #222;
            }
            .ep-search {
                flex: 1;
                margin: 0 20px;
                padding: 8px 12px;
                border: 1px solid #ccc;
                border-radius: 6px;
                font-size: 14px;
            }
            nav a {
                margin-left: 18px;
                text-decoration: none;
                color: #333;
                font-size: 14px;
            }
            nav a:hover {
                text-decoration: underline;
            }
        </style>

        <header class="ep-nav">
            <div class="ep-logo">EP Header</div>
            <input class="ep-search" type="text" placeholder="Search..." />
            <nav>
                <a href="/">Home</a>
                <a href="/products">Products</a>
                <a href="/contact">Contact</a>
            </nav>
        </header>
        `;
    }

    if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", init);
    } else {
        init();
    }

})();
